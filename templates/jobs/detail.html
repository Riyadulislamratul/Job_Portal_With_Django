{% extends "base.html" %}

{% block title %}
Details
{% endblock title %}

{% block content %}

<div class="mb-8">
  <a href="/" class="inline-flex items-center text-green-700 font-semibold hover:text-green-800">
    ← Browse Jobs
  </a>
</div>

<div class="bg-green-50 border border-green-200 rounded-2xl p-8 shadow">

  <div class="flex flex-col md:flex-row justify-between items-start gap-6 mb-8">
    <div>
      <h1 class="text-4xl font-extrabold text-green-900 mb-2">
        {{ job.title }}
      </h1>
      <p class="text-green-700 text-lg">
        {{ job.recruiter.recruiterprofile.company_name|default:"Company" }}
      </p>
    </div>

    {% if job.company_logo %}
    <div class="bg-white p-3 rounded-xl shadow">
      <img src="{{ job.company_logo.url }}" class="h-20 w-20 object-cover rounded-lg">
    </div>
    {% endif %}
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
    <div class="bg-white rounded-xl p-5 border border-green-200">
      <p class="text-sm text-green-600 mb-1">Category</p>
      <p class="text-xl font-bold text-green-900">{{ job.category }}</p>
    </div>
    <div class="bg-white rounded-xl p-5 border border-green-200">
      <p class="text-sm text-green-600 mb-1">Open Positions</p>
      <p class="text-xl font-bold text-green-900">{{ job.openings }}</p>
    </div>
    <div class="bg-white rounded-xl p-5 border border-green-200">
      <p class="text-sm text-green-600 mb-1">Required Skills</p>
      <p class="text-md font-semibold text-green-900 break-words">{{ job.skills }}</p>
    </div>
  </div>

  <div class="mb-10">
    <h3 class="text-2xl font-bold text-green-800 mb-4">Job Overview</h3>
    <div class="bg-white border border-green-200 rounded-xl p-6 text-gray-700 leading-relaxed">
      {{ job.description|linebreaks }}
    </div>
  </div>

  {% if user.is_authenticated and user.user_type == 'JOBSEEKER' %}
    {% if applied %}
      <div class="bg-green-100 border border-green-300 text-green-800 p-5 rounded-xl font-semibold">
        ✓ You’ve already applied for this role. We wish you the best!
      </div>
    {% else %}
      <form method="post">
        {% csrf_token %}
        <button class="bg-green-700 text-white px-10 py-4 rounded-xl hover:bg-green-800 font-bold">
          Apply for This Job
        </button>
      </form>
    {% endif %}
  {% elif user.is_authenticated %}
    <div class="bg-green-100 border border-green-300 p-5 rounded-xl text-green-800 font-medium">
      This account type cannot apply for jobs. Switch to a jobseeker account to continue.
    </div>
  {% else %}
    <div class="bg-green-100 border border-green-300 p-5 rounded-xl text-green-800 font-medium">
      <a href="{% url 'login' %}" class="underline font-bold">Login</a>
      or
      <a href="{% url 'register' %}" class="underline font-bold">create an account</a>
      to apply for this position.
    </div>
  {% endif %}

</div>

{% endblock %}
